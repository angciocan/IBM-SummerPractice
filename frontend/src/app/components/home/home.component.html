<div *ngIf="selectedUser">
  <h3>Currently Selected User</h3>
  <p>Name: {{ selectedUser.name | replaceNullWithText: "No student chosen" }}</p>

  <div *ngIf="isStudent(selectedUser)">
    <p>Year of study: {{ selectedUser.studyYear | replaceNullWithText: "No student chosen" }}</p>
    <p>You need to pick {{ selectedUser.studyYear | replaceNullWithText: "No student chosen" }} courses</p>

    <h4>Mandatory Courses</h4>
    <ul>
      <li *ngFor="let course of mandatoryCourses">
        {{ course.courseName }} - {{ course.dayOfWeek }} at {{ course.time }}
      </li>
    </ul>

    <h4>Elective Courses</h4>
    <ul>
      <li *ngFor="let course of electiveCourses">
        {{ course.courseName }} - {{ course.dayOfWeek }} at {{ course.time }} - Applications: {{ courseApplicationCounts[course.id] || 0 }}
      </li>
    </ul>
  </div>

  <div *ngIf="selectedUser.role === 'teacher'">
    <h4>Teaching Courses:</h4>
    <ul>
      <li *ngFor="let course of courses">
        {{ course.courseName }} - {{ course.dayOfWeek }} at {{ course.time }}
      </li>
    </ul>
  </div>

  <div *ngIf="selectedUser.role === 'admin'">
    <h4>Admin Commands:</h4>

    <label for="yearFilter">Filter by Year:</label>
    <select id="yearFilter" (change)="onYearFilter($event)">
      <option value="">All Years</option>
      <option *ngFor="let year of uniqueStudyYears" [value]="year">{{ year }}</option>
    </select>

    <label for="facultyFilter">Filter by Faculty Section:</label>
    <select id="facultyFilter" (change)="onFacultyFilter($event)">
      <option value="">All Sections</option>
      <option *ngFor="let section of uniqueFacultySections" [value]="section">{{ section }}</option>
    </select>

    <label for="gradeFilter">Filter by Minimum Grade:</label>
    <input type="number" id="gradeFilter" (input)="onGradeFilter($event)" />

    <ul>
      <li *ngFor="let student of filteredStudents">
        {{ student.name }} - Year of study: {{student.studyYear}} - Grade: {{student.grade}} - Section {{student.facultySection}}
      </li>
    </ul>

    <h2>Create a New Course</h2>

    <form (ngSubmit)="onCreateCourse()">
      <label for="courseName">Course Name:</label>
      <input type="text" id="courseName" [(ngModel)]="newCourse.courseName" name="courseName" required />

      <label for="maxStudents">Max Students:</label>
      <input type="number" id="maxStudents" [(ngModel)]="newCourse.maxStudents" name="maxStudents" required />

      <label for="studyYear">Study Year:</label>
      <input type="number" id="studyYear" [(ngModel)]="newCourse.studyYear" name="studyYear" required />

      <label for="category">Category:</label>
      <select id="category" [(ngModel)]="newCourse.category" name="category" required>
        <option value="mandatory">Mandatory</option>
        <option value="elective">Elective</option>
      </select>

      <label for="dayOfWeek">Day of Week:</label>
      <select id="dayOfWeek" [(ngModel)]="newCourse.dayOfWeek" name="dayOfWeek" required>
        <option value="MONDAY">Monday</option>
        <option value="TUESDAY">Tuesday</option>
        <option value="WEDNESDAY">Wednesday</option>
        <option value="THURSDAY">Thursday</option>
        <option value="FRIDAY">Friday</option>
      </select>

      <label for="time">Time:</label>
      <input type="time" id="time" [(ngModel)]="newCourse.time" name="time" required />

      <button type="submit">Create Course</button>
    </form>
  </div>
</div>
